{"version":3,"sources":["pages/utils/utils.ts","core/Message.tsx","core/SelfMessage.tsx","core/OnlineUsers.tsx","customHooks/Socket.tsx","pages/HomePage.tsx","pages/LoginPage.tsx","index.tsx"],"names":["timeMessageSent","hours","Date","getHours","toString","minutes","getMinutes","length","Message","comment","userName","content","timeSent","directMsg","privateMsg","className","style","color","display","SelfMessage","target","OnlineUsers","users","setPrivateMsg","useState","targetMsg","setTargetMsg","role","backgroundColor","onClick","map","user","e","handlePrivateMsg","icon","faComments","useSocket","comments","setComments","setUsers","useLocation","state","socketRef","useRef","useEffect","current","io","path","reconnectionDelayMax","auth","token","query","on","allComments","onlineUsers","newComment","prevState","disconnect","err","console","log","HomePage","inputEl","postComment","a","value","emit","id","type","placeholder","name","ref","preventDefault","LoginPage","navigate","useNavigate","onSubmit","toHomePage","htmlFor","ReactDOM","render","StrictMode","element","document","getElementById"],"mappings":"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","file":"static/js/main.253709ae.chunk.js","sourcesContent":["const timeMessageSent = (): string => {\r\n  const hours = new Date().getHours().toString();\r\n  let minutes = new Date().getMinutes().toString();\r\n  if (minutes.length === 1) minutes = `0${minutes}`;\r\n  return `${hours}:${minutes}`;\r\n};\r\n\r\nexport default timeMessageSent;\r\n","import React from \"react\";\r\nimport { Comment } from \"../types\";\r\n\r\nconst Message = function ({ comment }: { comment: Comment }) {\r\n  const { userName, content, timeSent, privateMsg } = comment;\r\n  const directMsg = privateMsg ? \"block\" : \"none\";\r\n\r\n  return (\r\n    <div className=\"container-message\">\r\n      <div className=\"message-orange\">\r\n        <p className=\"message-content\">\r\n          <b>{`${userName}`}</b>:{content}\r\n        </p>\r\n        <div className=\"message-timestamp-left\">\r\n          <span>\r\n            SMS\r\n            {timeSent}\r\n          </span>\r\n          <span style={{ color: \"red\", display: directMsg }}>\r\n            Direct messgae!\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React from \"react\";\r\nimport { Comment } from \"../types\";\r\n\r\nconst SelfMessage = function ({ comment }: { comment: Comment }) {\r\n  const { userName, content, timeSent, target } = comment;\r\n  const directMsg = target ? \"block\" : \"none\";\r\n\r\n  return (\r\n    <div className=\"container-message\">\r\n      <div className=\"message-blue\">\r\n        <p className=\"message-content\">\r\n          <b>{`${userName}`}</b>:{content}\r\n        </p>\r\n        <div className=\"message-timestamp-left\">\r\n          <span>\r\n            SMS\r\n            {timeSent}\r\n          </span>\r\n          <span style={{ color: \"red\", display: directMsg }}>\r\n            Me to {target}\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelfMessage;\r\n","/* eslint-disable no-param-reassign */\r\n/* eslint-disable jsx-a11y/click-events-have-key-events */\r\n/* eslint-disable jsx-a11y/interactive-supports-focus */\r\nimport React, { useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faComments } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst OnlineUsers = function ({\r\n  users,\r\n  setPrivateMsg,\r\n}: {\r\n  users: string[];\r\n  setPrivateMsg: (msg: string) => void;\r\n}) {\r\n  const [targetMsg, setTargetMsg] = useState<string>(\"everyone\");\r\n  const handlePrivateMsg = (target: HTMLDivElement, user: string) => {\r\n    setTargetMsg(user);\r\n    setPrivateMsg(user);\r\n  };\r\n  const sendToAll = () => {\r\n    setTargetMsg(\"everyone\");\r\n    setPrivateMsg(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"online-tab\">\r\n      <div className=\"status-bar-user\">\r\n        <p>\r\n          <span>â€¢</span>\r\n          Online\r\n        </p>\r\n      </div>\r\n      <div className=\"online-user-list\">\r\n        <div\r\n          role=\"button\"\r\n          className=\"aside__user online-circle\"\r\n          style={{\r\n            backgroundColor: targetMsg === \"everyone\" ? \"#44db8b\" : \"gainsboro\",\r\n          }}\r\n          key=\"everyone\"\r\n          onClick={sendToAll}\r\n        >\r\n          <span>Every One</span>\r\n        </div>\r\n        {users.map((user) => (\r\n          <div\r\n            role=\"button\"\r\n            className=\"aside__user online-circle\"\r\n            style={{\r\n              backgroundColor: targetMsg === user ? \"#44db8b\" : \"gainsboro\",\r\n            }}\r\n            key={user}\r\n            onClick={(e) => handlePrivateMsg(e.target as HTMLDivElement, user)}\r\n          >\r\n            <span>{user}</span>\r\n            <span>\r\n              <FontAwesomeIcon icon={faComments} style={{ color: \"green\" }} />\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OnlineUsers;\r\n","/* eslint-disable camelcase */\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport io, { Socket } from \"socket.io-client\";\r\nimport { Comment } from \"../types\";\r\n\r\nconst useSocket = () => {\r\n  const [comments, setComments] = useState<Comment[]>([]);\r\n  const [users, setUsers] = useState<string[]>([]);\r\n  const location = useLocation();\r\n  const userName: string = location.state.user;\r\n  const socketRef = useRef<Socket>();\r\n\r\n  const Base_URL_PATH = \"/\";\r\n\r\n  useEffect(() => {\r\n    socketRef.current = io(`${Base_URL_PATH}`, {\r\n      path: \"/api/chatstream\",\r\n      reconnectionDelayMax: 10000,\r\n      auth: {\r\n        token: \"123\",\r\n      },\r\n      query: {\r\n        \"my-key\": \"my-value\",\r\n        userName,\r\n      },\r\n    });\r\n\r\n    socketRef.current.on(\"connectionOpened\", ({ allComments, onlineUsers }) => {\r\n      setComments(allComments);\r\n      setUsers(onlineUsers);\r\n    });\r\n\r\n    socketRef.current.on(\"onlineUsers\", ({ onlineUsers }) => {\r\n      setUsers(onlineUsers);\r\n    });\r\n\r\n    socketRef.current.on(\"commentPosted\", (newComment: Comment) => {\r\n      setComments((prevState: Comment[]) => [newComment, ...prevState]);\r\n    });\r\n    socketRef.current.on(\"connect_error\", () => {\r\n      socketRef.current?.disconnect();\r\n    });\r\n\r\n    socketRef.current.on(\"error\", ({ err }) => {\r\n      console.log(`an error occured: ${err}`);\r\n    });\r\n  }, []);\r\n\r\n  return { comments, users, socketRef, userName };\r\n};\r\n\r\nexport default useSocket;\r\n","/* eslint-disable no-unused-expressions */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable no-underscore-dangle */\r\nimport React, { useRef, useState } from \"react\";\r\nimport timeMessageSent from \"./utils/utils\";\r\nimport Message from \"../core/Message\";\r\nimport SelfMessage from \"../core/SelfMessage\";\r\nimport OnlineUsers from \"../core/OnlineUsers\";\r\nimport useSocket from \"../customHooks/Socket\";\r\n\r\nconst HomePage = function () {\r\n  const [privateMsg, setPrivateMsg] = useState<string>();\r\n  const inputEl = useRef<HTMLInputElement>(null);\r\n  const { comments, users, socketRef, userName } = useSocket();\r\n\r\n  async function postComment() {\r\n    if (!inputEl.current?.value) return;\r\n    const newComment = {\r\n      timeSent: timeMessageSent(),\r\n      content: inputEl.current?.value,\r\n      userName,\r\n    };\r\n    !privateMsg\r\n      ? socketRef.current?.emit(\"postComment\", newComment)\r\n      : socketRef.current?.emit(\"privateComment\", {\r\n          newComment,\r\n          userName: privateMsg,\r\n        });\r\n    inputEl.current.value = \"\";\r\n  }\r\n\r\n  return (\r\n    <div id=\"homePage\">\r\n      <div className=\"welcome-banner\">\r\n        <div className=\"name-side\">\r\n          <p>\r\n            Welcome,\r\n            {userName}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"chat\">\r\n        <OnlineUsers users={users} setPrivateMsg={setPrivateMsg} />\r\n        <div className=\"wrapper\">\r\n          <div className=\"main-container\">\r\n            <div className=\"message-area\">\r\n              {!comments\r\n                ? \"\"\r\n                : comments.map((comment) =>\r\n                    comment.userName === userName ? (\r\n                      <SelfMessage comment={comment} key={comment.id} />\r\n                    ) : (\r\n                      <Message comment={comment} key={comment.id} />\r\n                    )\r\n                  )}\r\n            </div>\r\n            <div className=\"enter-area\">\r\n              <form>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Enter Message...\"\r\n                  name=\"message-ent\"\r\n                  id=\"message-ent\"\r\n                  ref={inputEl}\r\n                />\r\n                <input\r\n                  className=\"submitComment\"\r\n                  type=\"submit\"\r\n                  name=\"message-send\"\r\n                  id=\"message-send\"\r\n                  value=\"Send\"\r\n                  onClick={async (e) => {\r\n                    e.preventDefault();\r\n                    postComment();\r\n                  }}\r\n                />\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useRef } from \"react\";\r\n// eslint-disable-next-line import/no-unresolved\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst LoginPage = function () {\r\n  const navigate = useNavigate();\r\n  const inputEl = useRef<HTMLInputElement>(null);\r\n  const toHomePage = (): boolean => {\r\n    console.log(\"im on home page\");\r\n    if (!inputEl.current?.value) return false;\r\n    return true;\r\n  };\r\n  return (\r\n    <div id=\"loginPage\">\r\n      <div className=\"background\">\r\n        <div className=\"shape\" />\r\n        <div className=\"shape\" />\r\n      </div>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          if (toHomePage()) {\r\n            navigate(\"/\", { state: { user: inputEl.current?.value } });\r\n          }\r\n        }}\r\n      >\r\n        <h3>Login Here</h3>\r\n        <label htmlFor=\"username\">\r\n          Username\r\n          <input type=\"text\" placeholder=\"username\" id=\"username\" ref={inputEl} />\r\n        </label>\r\n\r\n        <button type=\"submit\">Log In</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/common.scss\";\r\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    {/* <Layout> */}\r\n    <BrowserRouter>\r\n      <Routes>\r\n        <Route path=\"/login\" element={<LoginPage />} />\r\n        <Route path=\"/\" element={<HomePage />} />\r\n      </Routes>\r\n    </BrowserRouter>\r\n    {/* </Layout> */}\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\"),\r\n);\r\n"],"sourceRoot":""}