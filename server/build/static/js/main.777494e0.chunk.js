(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var s=n(0),c=n.n(s),a=n(22),r=n.n(a),i=(n(27),n(7)),o=n(2),j=n(6),l=n.n(j),u=n(11),m=n(5),d=n(1);function b(e){var t=e.comment,n=t.userName,s=t.content,c=t.timeSent;return Object(d.jsx)("div",{className:"container-message",children:Object(d.jsxs)("div",{className:"message-orange",children:[Object(d.jsxs)("p",{className:"message-content",children:[Object(d.jsx)("b",{children:"".concat(n)}),": ",s]}),Object(d.jsxs)("div",{className:"message-timestamp-left",children:["SMS ",c]})]})})}function O(e){var t=e.comment,n=t.userName,s=t.content,c=t.timeSent;return Object(d.jsx)("div",{className:"container-message",children:Object(d.jsxs)("div",{className:"message-blue",children:[Object(d.jsxs)("p",{className:"message-content",children:[Object(d.jsx)("b",{children:"".concat(n)}),": ",s]}),Object(d.jsxs)("div",{className:"message-timestamp-left",children:["SMS ",c]})]})})}function h(e){var t=e.users;return Object(d.jsxs)("div",{className:"online-tab",children:[Object(d.jsx)("div",{className:"status-bar-user",children:Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{children:"\u2022"}),"Online"]})}),Object(d.jsx)("div",{className:"online-user-list",children:t.map((function(e){return Object(d.jsx)("div",{className:"onlineUser",children:e},e)}))})]})}var p=n(13),x=n.n(p);function v(){var e=Object(s.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)([]),r=Object(m.a)(a,2),i=r[0],j=r[1],p=Object(s.useState)(null),v=Object(m.a)(p,2),f=v[0],g=v[1],N=Object(o.e)(),S=Object(s.useRef)(),w=N.state.user;function k(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(l.a.mark((function e(){var t,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.current.value){e.next=2;break}return e.abrupt("return");case 2:return t=(new Date).getHours().toString(),1===(n=(new Date).getMinutes().toString()).length&&(n="0".concat(n)),s="".concat(t,":").concat(n),e.prev=6,e.next=9,x.a.post("/api/postComment",{content:S.current.value,userName:w,timeSent:s},{headers:{"content-Type":"application/json"}});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){g(new EventSource("/api/chatStream/?userName=".concat(w),{headers:{"Content-Type":"text/event-stream"}}))}),[]),f&&(f.onopen=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("connection to stream has been opened"),e.next=3,x.a.post("/api/addOnlineUser/".concat(w));case 3:case"end":return e.stop()}}),e)}))),f.onerror=function(e){console.log("An error has occurred while receiving stream",e)},f.onmessage=function(e){var t=JSON.parse(e.data).users,n=JSON.parse(e.data).newComments;t&&j(t),n&&(n=n.reverse(),c(n))}),Object(d.jsxs)("div",{id:"homePage",children:[Object(d.jsx)("div",{className:"welcome-banner",children:Object(d.jsx)("div",{className:"name-side",children:Object(d.jsxs)("p",{children:["Welcome, ",w]})})}),Object(d.jsxs)("div",{className:"chat",children:[Object(d.jsx)(h,{users:i}),Object(d.jsx)("div",{className:"wrapper",children:Object(d.jsxs)("div",{className:"main-container",children:[Object(d.jsx)("div",{className:"message-area",children:n?n.map((function(e){return e.userName===w?Object(d.jsx)(O,{comment:e},e._id):Object(d.jsx)(b,{comment:e},e._id)})):""}),Object(d.jsx)("div",{className:"enter-area",children:Object(d.jsxs)("form",{children:[Object(d.jsx)("input",{type:"text",placeholder:"Enter Message...",name:"message-ent",id:"message-ent",ref:S}),Object(d.jsx)("input",{className:"submitComment",type:"submit",name:"message-send",id:"message-send",value:"Send",onClick:function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),k();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})})]})})]})]})}function f(){var e=Object(o.f)(),t=Object(s.useRef)();return Object(d.jsxs)("div",{id:"loginPage",children:[Object(d.jsxs)("div",{className:"background",children:[Object(d.jsx)("div",{className:"shape"}),Object(d.jsx)("div",{className:"shape"})]}),Object(d.jsxs)("form",{onSubmit:function(n){n.preventDefault(),function(e){return""!==e.current.value}(t)&&e("/",{state:{user:t.current.value}})},children:[Object(d.jsx)("h3",{children:"Login Here"}),Object(d.jsx)("label",{htmlFor:"username",children:"Username"}),Object(d.jsx)("input",{type:"text",placeholder:"Email or Phone",id:"username",ref:t}),Object(d.jsx)("button",{children:"Log In"})]})]})}r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{path:"/login",element:Object(d.jsx)(f,{})}),Object(d.jsx)(o.a,{path:"/",element:Object(d.jsx)(v,{})})]})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.777494e0.chunk.js.map