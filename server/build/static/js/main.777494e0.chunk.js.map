{"version":3,"sources":["core/components/Message.js","core/components/SelfMessage.js","core/components/OnlineUsers.js","pages/HomePage.jsx","pages/LoginPage.jsx","index.js"],"names":["Message","comment","userName","content","timeSent","className","SelfMessage","OnlineUsers","users","map","user","HomePage","useState","comments","setComments","SetUsers","source","setSource","location","useLocation","inputEl","useRef","state","postComment","a","current","value","hours","Date","getHours","toString","minutes","getMinutes","length","axios","post","headers","console","log","useEffect","EventSource","onopen","onerror","error","onmessage","event","JSON","parse","data","newComments","reverse","id","_id","type","placeholder","name","ref","onClick","e","preventDefault","LoginPage","navigate","useNavigate","onSubmit","toHomePage","htmlFor","ReactDOM","render","StrictMode","path","element","document","getElementById"],"mappings":"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","file":"static/js/main.777494e0.chunk.js","sourcesContent":["// export function SelfMessage({ comment }) {\r\n//   const { userName, content, timeSent } = comment;\r\n//   return (\r\n//     <div className=\"container-message\">\r\n//       <div className=\"message-blue\">\r\n//         <p className=\"message-content\">\r\n//           <b>{`${userName}`}</b>: {content}\r\n//         </p>\r\n//         <div className=\"message-timestamp-left\">SMS {timeSent}</div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\nexport function Message({ comment }) {\r\n  const { userName, content, timeSent } = comment;\r\n\r\n  return (\r\n    <div className=\"container-message\">\r\n      <div className=\"message-orange\">\r\n        <p className=\"message-content\">\r\n          <b>{`${userName}`}</b>: {content}\r\n        </p>\r\n        <div className=\"message-timestamp-left\">SMS {timeSent}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export function SelfMessage({ comment }) {\r\n  const { userName, content, timeSent } = comment;\r\n  return (\r\n    <div className=\"container-message\">\r\n      <div className=\"message-blue\">\r\n        <p className=\"message-content\">\r\n          <b>{`${userName}`}</b>: {content}\r\n        </p>\r\n        <div className=\"message-timestamp-left\">SMS {timeSent}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function OnlineUsers({ users }) {\r\n  return (\r\n    <div className=\"online-tab\">\r\n      <div className=\"status-bar-user\">\r\n        <p>\r\n          <span>â€¢</span>Online\r\n        </p>\r\n      </div>\r\n      <div className=\"online-user-list\">\r\n        {users.map((user) => {\r\n          return (\r\n            <div className=\"onlineUser\" key={user}>\r\n              {user}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { Message } from \"../core/components/Message\";\r\nimport { SelfMessage } from \"../core/components/SelfMessage\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport OnlineUsers from \"../core/components/OnlineUsers\";\r\nimport axios from \"axios\";\r\n\r\nexport default function HomePage() {\r\n  const [comments, setComments] = useState([]);\r\n  const [users, SetUsers] = useState([]);\r\n  const [source, setSource] = useState(null);\r\n  const location = useLocation();\r\n  const inputEl = useRef();\r\n  const userName = location.state.user;\r\n\r\n  useEffect(() => {\r\n    setSource(\r\n      new EventSource(`/api/chatStream/?userName=${userName}`, {\r\n        headers: { \"Content-Type\": \"text/event-stream\" },\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  if (source) {\r\n    source.onopen = async function () {\r\n      console.log(\"connection to stream has been opened\");\r\n      await axios.post(`/api/addOnlineUser/${userName}`);\r\n    };\r\n    source.onerror = function (error) {\r\n      console.log(\"An error has occurred while receiving stream\", error);\r\n    };\r\n    source.onmessage = function (event) {\r\n      const users = JSON.parse(event.data).users;\r\n      let newComments = JSON.parse(event.data).newComments;\r\n\r\n      if (users) SetUsers(users);\r\n      if (newComments) {\r\n        newComments = newComments.reverse();\r\n        setComments(newComments);\r\n      }\r\n    };\r\n  }\r\n\r\n  async function postComment() {\r\n    if (!inputEl.current.value) return;\r\n    const hours = new Date().getHours().toString();\r\n    let minutes = new Date().getMinutes().toString();\r\n    if (minutes.length === 1) minutes = `0${minutes}`;\r\n    const timeSent = `${hours}:${minutes}`;\r\n    try {\r\n      await axios.post(\r\n        \"/api/postComment\",\r\n        { content: inputEl.current.value, userName: userName, timeSent },\r\n        {\r\n          headers: {\r\n            \"content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div id=\"homePage\">\r\n      <div className=\"welcome-banner\">\r\n        <div className=\"name-side\">\r\n          <p>Welcome, {userName}</p>\r\n        </div>\r\n      </div>\r\n      <div className=\"chat\">\r\n        <OnlineUsers users={users} />\r\n        <div className=\"wrapper\">\r\n          <div className=\"main-container\">\r\n            <div className=\"message-area\">\r\n              {!comments\r\n                ? \"\"\r\n                : comments.map((comment) =>\r\n                    comment.userName === userName ? (\r\n                      <SelfMessage comment={comment} key={comment._id} />\r\n                    ) : (\r\n                      <Message comment={comment} key={comment._id} />\r\n                    )\r\n                  )}\r\n            </div>\r\n            <div className=\"enter-area\">\r\n              <form>\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Enter Message...\"\r\n                  name=\"message-ent\"\r\n                  id=\"message-ent\"\r\n                  ref={inputEl}\r\n                ></input>\r\n                <input\r\n                  className=\"submitComment\"\r\n                  type=\"submit\"\r\n                  name=\"message-send\"\r\n                  id=\"message-send\"\r\n                  value=\"Send\"\r\n                  onClick={async (e) => {\r\n                    e.preventDefault();\r\n                    postComment();\r\n                  }}\r\n                ></input>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function LoginPage() {\r\n  const navigate = useNavigate();\r\n  const inputEl = useRef();\r\n\r\n  function toHomePage(inputEl) {\r\n    const inputVal = inputEl.current.value;\r\n    if (inputVal !== \"\") return true;\r\n    return false;\r\n  }\r\n  return (\r\n    <div id=\"loginPage\">\r\n      <div className=\"background\">\r\n        <div className=\"shape\"></div>\r\n        <div className=\"shape\"></div>\r\n      </div>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          if (toHomePage(inputEl))\r\n            navigate(\"/\", { state: { user: inputEl.current.value } });\r\n        }}\r\n      >\r\n        <h3>Login Here</h3>\r\n        <label htmlFor=\"username\">Username</label>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Email or Phone\"\r\n          id=\"username\"\r\n          ref={inputEl}\r\n        />\r\n\r\n        <button>Log In</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./styles/common.scss\";\r\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\r\nimport HomePage from \"./pages/HomePage.jsx\";\r\nimport LoginPage from \"./pages/LoginPage.jsx\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Routes>\r\n        <Route path=\"/login\" element={<LoginPage />} />\r\n        <Route path=\"/\" element={<HomePage />} />\r\n      </Routes>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}